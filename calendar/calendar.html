<!DOCTYPE html>
<html>
    <head>
        <title>Login</title>
        <link rel='stylesheet' href='fullcalendar.css' />
        <script src='lib/jquery.min.js'></script>
        <script src='lib/moment.min.js'></script>
        <script src='fullcalendar.js'></script>
        <script src='locale/es.js'></script>
        <meta charset="UTF-8">
		<link rel="shortcut icon" href="../images/favicon.png" type="image/png">
        <link rel="stylesheet" href="../css/index.css">
        <script>
            $(document).ready(function() {
                $('#reservetext').hide();
                //Calendar config
                $('#calendar').fullCalendar({
                    header: {
				        left: 'prevYear,nextYear today',
				        center: 'prev title next',
				        right: 'month,agendaWeek,agendaDay listMonth'
			        },
                    minTime:"09:00:00",
                    maxTime:"20:00:00",
                    slotEventOverlap:false,
                    timeFormat:'HH(:mm)',
                    slotLabelFormat:'HH(:mm)A',
                    displayEventEnd:true,
                    navLinks:true,
                    selectable: true,
                    selectHelper:true,
                    selectOverlap:false,
                    selectMinDistance:50,
                    businessHours:[ 
                        {
                            dow: [ 1, 2, 3, 4, 5, 6], 
                            start: '09:00', 
                            end: '13:00' 
                        },
                        {
                            dow: [ 1, 2, 3, 4, 5],
                            start: '16:00', 
                            end: '20:00' 
                        }
                    ],  
                    dayClick: function(date) {
                        alert('Clicked on: ' + date.format());
                    },
                    eventClick:function(event){
                        alert('Titulo de evento: '+event.title);
                    },
                    select: function(start, end){
                        $('#selection').html('Comienzo de reserva: '+start.format()+'<BR>Final de reserva: '+end.format());
                        $('#reservetext').show();
                        $('#reserve').click(function(){
                            var title=$('#titletext').val();
                            $.post(
                                'loadevents.php',
                                {moment:'reserve',startev:start.format(),endev:end.format(),titleev:title},
                                function(data){
                                    $('#response').html(data);
                                }
                            );
                        });
                    },
                    events: function(start,end,timezone,callback){
                        //Request events
                        $.post(
                            'loadevents.php',
                            {moment:'onload'},
                            function(data){
                                eventos=JSON.parse(data);
                                $('#response').html(data);
                                callback(eventos);
                            }
                        );
                    }
                });
            });
        </script>
    </head>

    <body>
        <script src="../templates/header.js"></script>
        <div class="content">
			<div class="container">  
                <div class='main'>
                    <div id='calendar'></div>
                </div>
                <div class='aside'>
                    <h3 id="response"></h3>
                    <h3 id="selection"></h3>
                    <div id="reservetext">
                        <h3>Ingrese titulo de reserva</h3>
                        <input type="text" id="titletext">
                        <input type="button" value="Reserve" id="reserve">
                    </div>
                </div>
			</div>
		</div>
        <script src="../templates/footer.js"></script>
    </body>
</html>